# ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç SwiftData "Unbinding from main queue"

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### 1. Clean Build Folder (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç!)

#### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ô Xcode
1. ‡πÄ‡∏õ‡∏¥‡∏î Xcode
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Menu: `Product` > `Clean Build Folder` (‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î `Shift + Cmd + K`)
3. ‡∏£‡∏≠‡πÉ‡∏´‡πâ clean ‡πÄ‡∏™‡∏£‡πá‡∏à

#### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ Terminal
```bash
cd /Users/siravit/MovieFinder
rm -rf ~/Library/Developer/Xcode/DerivedData/MovieFinder-*
```

### 2. Build Project
1. ‡πÉ‡∏ô Xcode: `Product` > `Build` (‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î `Cmd + B`)
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ build ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÑ‡∏°‡πà‡∏°‡∏µ errors

### 3. Run ‡πÅ‡∏≠‡∏û
1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å simulator ‡∏´‡∏£‡∏∑‡∏≠ device
2. ‡∏Å‡∏î Run (Cmd + R)
3. ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏û‡πÄ‡∏õ‡∏¥‡∏î

### 4. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Add to Watchlist

#### Step 1: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡∏±‡∏á
1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏û
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Home ‡∏´‡∏£‡∏∑‡∏≠ Search
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

#### Step 2: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ Watchlist
1. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "Add to Watchlist" ‡∏´‡∏£‡∏∑‡∏≠ bookmark icon
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Xcode Console (Cmd + Shift + Y)
3. **‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ** warning ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ:
   ```
   ‚ùå SwiftData.ModelContext: Unbinding from the main queue
   ‚ùå ModelContexts are not Sendable
   ```

#### Step 3: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Watchlist
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Tab Watchlist
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏´‡∏ô‡∏±‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏£‡∏≤‡∏Å‡∏è
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á - **‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ warning**

### 5. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Remove from Watchlist

#### Step 1: ‡∏•‡∏ö‡∏´‡∏ô‡∏±‡∏á
1. ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Watchlist
2. Swipe ‡∏´‡∏ô‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö
3. Confirm ‡∏Å‡∏≤‡∏£‡∏•‡∏ö

#### Step 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏´‡∏ô‡∏±‡∏á‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å list
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console - **‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ warning**

### 6. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏´‡∏ô‡∏±‡∏á
1. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡∏±‡∏á 3-5 ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Watchlist
2. ‡∏•‡∏ö‡∏ö‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á
3. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å
4. ‡∏ï‡∏•‡∏≠‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Console **‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ warning** ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö "Unbinding from main queue"

### 7. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Sorting (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
1. ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå sort ‡πÉ‡∏ô Watchlist
2. ‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô sort order
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ warning

## Checklist ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ

- [ ] Clean Build Folder ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- [ ] Build ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÑ‡∏°‡πà‡∏°‡∏µ compile errors
- [ ] Run ‡πÅ‡∏≠‡∏û‡πÑ‡∏î‡πâ
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Watchlist ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- [ ] ‡πÑ‡∏°‡πà‡∏°‡∏µ warning "Unbinding from main queue"
- [ ] ‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡∏±‡∏á‡πÉ‡∏ô Watchlist
- [ ] ‡∏•‡∏ö‡∏´‡∏ô‡∏±‡∏á‡∏à‡∏≤‡∏Å Watchlist ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- [ ] ‡πÑ‡∏°‡πà‡∏°‡∏µ warning ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏ö
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

## ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á

### ‚ö†Ô∏è Warning ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏û‡∏ö (‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤)
- Preview provider warnings (‡∏õ‡∏Å‡∏ï‡∏¥)
- Kingfisher cache warnings (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á)

### ‚ùå Warning ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏û‡∏ö
- `SwiftData.ModelContext: Unbinding from the main queue`
- `This context was instantiated on the main queue but is being used off it`
- `ModelContexts are not Sendable`

## ‡∏ñ‡πâ‡∏≤‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡∏¢‡∏±‡∏á‡∏°‡∏µ warning "Unbinding from main queue"
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ clean build folder ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏£‡∏¥‡∏á‡πÜ
2. Restart Xcode
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏°‡∏µ `@MainActor` ‡∏Ñ‡∏£‡∏ö:
   - WatchlistLocalDataSource
   - WatchlistRepository
   - ‡∏ó‡∏∏‡∏Å Use Cases (5 ‡πÑ‡∏ü‡∏•‡πå)

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Build failed
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
1. ‡∏î‡∏π error message ‡πÉ‡∏ô Xcode
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ syntax errors
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ imports ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Watchlist ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ ModelContainer ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô MovieFinderApp
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ DI configuration ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
3. ‡∏î‡∏π Console logs ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö error messages

## ‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

‡∏ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡πà‡∏≤‡∏ô ‚úÖ:
- ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ "Unbinding from main queue" **‡∏ñ‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß**
- SwiftData ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ö‡∏ô main thread ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
- ‡πÑ‡∏°‡πà‡∏°‡∏µ thread safety issues
- Watchlist feature ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥

## Performance Note

‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ `@MainActor` ‡∏Å‡∏±‡∏ö SwiftData:
- ‚úÖ **‡∏Ç‡πâ‡∏≠‡∏î‡∏µ**: ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢, ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤, UI updates ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚ö†Ô∏è **‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á**: Database operations ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ö‡∏ô main thread (‡πÅ‡∏ï‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Watchlist ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏Å ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤)
- üí° **Alternative**: ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ background processing ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ `@ModelActor` ‡πÅ‡∏ó‡∏ô

## ‡∏™‡∏£‡∏∏‡∏õ

‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ:
1. ‡πÄ‡∏û‡∏¥‡πà‡∏° `@MainActor` ‡πÉ‡∏´‡πâ Data Layer ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
2. ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤ SwiftData operations ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ö‡∏ô main thread
3. ‡πÅ‡∏Å‡πâ warning "Unbinding from main queue" ‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

---
**Last Updated:** 2025-12-12
**Status:** ‚úÖ Implementation Complete - Ready for Testing
